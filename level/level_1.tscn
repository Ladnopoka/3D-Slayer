[gd_scene load_steps=12 format=3 uid="uid://ckf3ipmwutb47"]

[ext_resource type="PackedScene" uid="uid://csqg2v0p2s8yw" path="res://player/rogue_hooded.tscn" id="2_aurua"]
[ext_resource type="PackedScene" uid="uid://dh7eqkenjyvhp" path="res://hideout/hideout.tscn" id="3_uheyo"]
[ext_resource type="PackedScene" uid="uid://dawwbik4sgvk7" path="res://player/barbarian.tscn" id="3_wd3uh"]
[ext_resource type="PackedScene" uid="uid://ds52ra1i0aaov" path="res://transition/transition.tscn" id="5_1qjme"]
[ext_resource type="FontFile" uid="uid://dxh1exxrby0bd" path="res://globals/Diablo Heavy.ttf" id="6_kd8a7"]
[ext_resource type="PackedScene" uid="uid://dcbt3cxtuaj55" path="res://player/mage.tscn" id="7_kerki"]
[ext_resource type="PackedScene" uid="uid://ci7p6fwa6jxd" path="res://portal/portal.tscn" id="10_wksuf"]

[sub_resource type="GDScript" id="GDScript_1jutb"]
script/source = "extends Node3D

@onready var transition = $Transition
@onready var score_max = $Score
@onready var deaths = $Deaths

var current_selected_character_name
var selection_area = preload(\"res://player/selection_area.tscn\")

# Called when the node enters the scene tree for the first time.
func _ready():
	transition.get_node(\"AnimationPlayer\").play(\"fade_in\")
	score_max.text = \"Best Score: \" + str(Global.best_score)
	deaths.text = \"Deaths: \" + str(Global.deaths)
	
	for character in $Characters.get_children():
		var selection_area_ins = selection_area.instantiate()
		character.add_child(selection_area_ins)
		
func character_selected(character_name):
	current_selected_character_name = character_name
	$CharacterLabel.text = current_selected_character_name
	for character in $Characters.get_children():
		character.get_child(character.get_child_count()-1).hide_selection()
"

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_n72or"]
albedo_color = Color(0.0784314, 0.239216, 0.0627451, 1)

[sub_resource type="PlaneMesh" id="PlaneMesh_o8vr5"]
material = SubResource("StandardMaterial3D_n72or")

[sub_resource type="BoxShape3D" id="BoxShape3D_lknay"]
size = Vector3(2, 2, 0)

[node name="Level1" type="Node3D"]
script = SubResource("GDScript_1jutb")

[node name="Characters" type="Node" parent="."]

[node name="Mage" parent="Characters" instance=ExtResource("7_kerki")]
transform = Transform3D(1, 0, 1.74846e-07, 0, 1, 0, -1.74846e-07, 0, 1, 0, 0, 11)

[node name="Rogue_Hooded" parent="Characters" instance=ExtResource("2_aurua")]
transform = Transform3D(-0.688582, 0, -0.725158, 0, 1, 0, 0.725158, 0, -0.688582, -6.52419, 0, 4.73239)
script = null

[node name="Skeleton3D" parent="Characters/Rogue_Hooded/Rig" index="0"]
bones/1/position = Vector3(-1.70498e-18, 0.380292, 8.57233e-19)
bones/1/rotation = Quaternion(0.000922719, 0.0427411, -0.00023796, 0.999086)
bones/2/rotation = Quaternion(0.000394852, -0.000683279, 0.00015723, 1)
bones/3/rotation = Quaternion(0.000200803, -0.000446067, 0.000193889, 1)
bones/4/position = Vector3(0.211955, 0.134077, -0.000135402)
bones/4/rotation = Quaternion(-0.554663, -0.06359, -0.653779, 0.510762)
bones/5/rotation = Quaternion(2.24073e-08, -3.87979e-08, -0.476273, 0.879297)
bones/7/rotation = Quaternion(-0.31682, -0.328618, 0.13239, 0.879834)
bones/8/rotation = Quaternion(0.00124391, 0.0017836, -0.700485, 0.713664)
bones/10/position = Vector3(-0.211987, 0.134097, -0.000124369)
bones/10/rotation = Quaternion(-0.613305, 0.0843224, 0.627967, 0.471598)
bones/11/rotation = Quaternion(-3.42026e-09, 4.92751e-08, 0.499097, 0.866546)
bones/13/rotation = Quaternion(-0.314975, 0.303357, -0.212891, 0.873752)
bones/14/rotation = Quaternion(0.00369654, 0.00528477, 0.701714, 0.71243)
bones/19/rotation = Quaternion(-0.000357012, -0.0308277, 0.000167973, 0.999525)
bones/21/position = Vector3(0.170945, 0.113587, 0.00047652)
bones/21/rotation = Quaternion(0.991849, 0.0821062, 0.0763749, 0.0605013)
bones/22/rotation = Quaternion(0.321131, 6.21117e-08, -2.19241e-07, 0.947035)
bones/23/rotation = Quaternion(-0.579765, -0.20353, 0.0616912, 0.786538)
bones/24/rotation = Quaternion(-3.04907e-08, 0.920355, -0.391084, 6.94865e-08)
bones/25/position = Vector3(-0.170945, 0.113587, -0.000476492)
bones/25/rotation = Quaternion(0.994476, -0.0311487, 0.0302607, 0.0955571)
bones/26/rotation = Quaternion(0.368873, -6.11952e-08, 2.57332e-07, 0.92948)
bones/27/rotation = Quaternion(-0.609181, 0.112598, -0.0165414, 0.784823)
bones/28/rotation = Quaternion(2.99932e-08, 0.919704, -0.392613, -6.94497e-08)
bones/29/position = Vector3(0.170945, 0.292469, 0.575971)
bones/30/position = Vector3(0.201894, 0.0260531, 0.204992)
bones/30/rotation = Quaternion(-0.704442, -7.07491e-08, -7.03297e-08, 0.709762)
bones/36/position = Vector3(-0.170945, 0.292469, 0.575971)
bones/37/position = Vector3(-0.170945, 0.0255482, 0.243954)
bones/37/rotation = Quaternion(-0.70577, -7.06867e-08, -7.03712e-08, 0.708441)
bones/44/position = Vector3(0.520409, 0.769819, -0.0556783)
bones/44/rotation = Quaternion(0.795509, 0.00288764, 0.605935, 0.00055978)
bones/46/position = Vector3(-0.510873, 0.769798, 0.0591375)
bones/46/rotation = Quaternion(-0.759985, 0.0023118, 0.649937, 0.000586601)

[node name="Knife_Offhand" parent="Characters/Rogue_Hooded/Rig/Skeleton3D" index="0"]
transform = Transform3D(-0.00443681, 0.265023, 0.964231, 0.999843, -0.0152975, 0.00880558, 0.0170844, 0.96412, -0.264914, 0.509932, 0.618377, -0.0203072)

[node name="1H_Crossbow" parent="Characters/Rogue_Hooded/Rig/Skeleton3D" index="1"]
transform = Transform3D(0.986346, -0.164682, 0.000948112, -0.000688539, -0.00987973, -0.99995, 0.164683, 0.986297, -0.00985856, -0.491124, 0.725999, 0.0967851)

[node name="2H_Crossbow" parent="Characters/Rogue_Hooded/Rig/Skeleton3D" index="2"]
transform = Transform3D(0.986346, -0.164682, 0.000948112, -0.000688539, -0.00987973, -0.99995, 0.164683, 0.986297, -0.00985856, -0.491124, 0.725999, 0.0967851)

[node name="Knife" parent="Characters/Rogue_Hooded/Rig/Skeleton3D" index="3"]
transform = Transform3D(-0.000948106, -0.164681, 0.986346, 0.99995, -0.00987958, -0.000688518, 0.00985841, 0.986297, 0.164683, -0.492731, 0.621274, 0.10597)

[node name="Throwable" parent="Characters/Rogue_Hooded/Rig/Skeleton3D" index="4"]
transform = Transform3D(-0.00094809, -0.164682, 0.986346, 0.99995, -0.00987957, -0.000688533, 0.0098584, 0.986297, 0.164683, -0.522414, 0.619493, 0.283746)

[node name="Rogue_Cape" parent="Characters/Rogue_Hooded/Rig/Skeleton3D" index="5"]
transform = Transform3D(0.996284, -3.57521e-05, 0.0861254, 0.000299994, 0.999995, -0.00305517, -0.0861249, 0.00306965, 0.99628, 0.000217195, 1.1905, 0.00208487)

[node name="Barbarian" parent="Characters" instance=ExtResource("3_wd3uh")]
transform = Transform3D(0.957637, 0, -0.287979, 0, 1, 0, 0.287979, 0, 0.957637, 0.549507, 0, -0.252919)

[node name="Skeleton3D" parent="Characters/Barbarian/Rig" index="0"]
bones/1/position = Vector3(0, 0.380422, 0)
bones/1/rotation = Quaternion(-1.11123e-10, 0.0431578, 2.57241e-09, 0.999068)
bones/4/rotation = Quaternion(-0.552543, -0.0633244, -0.657824, 0.507892)
bones/5/rotation = Quaternion(2.20693e-08, -3.89384e-08, -0.473566, 0.880758)
bones/7/rotation = Quaternion(-0.316549, -0.328461, 0.133257, 0.879859)
bones/8/rotation = Quaternion(0.00164306, 0.00164306, -0.701048, 0.71311)
bones/11/rotation = Quaternion(-0.612041, 0.0833806, 0.630499, 0.470027)
bones/12/rotation = Quaternion(-3.62676e-09, 4.93161e-08, 0.497768, 0.86731)
bones/14/rotation = Quaternion(-0.315091, 0.30246, -0.214932, 0.873521)
bones/15/rotation = Quaternion(0.0042223, 0.00497325, 0.702702, 0.711454)
bones/19/rotation = Quaternion(-5.80608e-11, -0.0313417, -1.88012e-09, 0.999509)
bones/22/rotation = Quaternion(0.991968, 0.0831383, 0.0767205, 0.0565836)
bones/23/rotation = Quaternion(0.314704, 6.22279e-08, -2.15208e-07, 0.94919)
bones/24/rotation = Quaternion(-0.579488, -0.205138, 0.0625768, 0.786255)
bones/26/rotation = Quaternion(0.994434, -0.0315585, 0.0305603, 0.0957633)
bones/27/rotation = Quaternion(0.368605, -6.11449e-08, 2.57182e-07, 0.929586)
bones/28/rotation = Quaternion(-0.609467, 0.11362, -0.0167728, 0.784449)
bones/29/rotation = Quaternion(3.04791e-08, 0.920355, -0.391084, -6.94849e-08)
bones/30/rotation = Quaternion(0.707107, -2.29302e-07, -4.60552e-08, 0.707107)
bones/31/position = Vector3(0.202182, 0.0259903, 0.205181)
bones/31/rotation = Quaternion(-0.707107, -7.05285e-08, -7.05285e-08, 0.707107)
bones/32/rotation = Quaternion(9.65792e-09, 1.77955e-09, 0.985719, -0.168398)
bones/33/rotation = Quaternion(-1.04035e-07, 0.391084, 0.920355, -2.9526e-08)
bones/35/rotation = Quaternion(1, -3.10863e-15, 1.94707e-07, -6.91739e-22)
bones/37/rotation = Quaternion(0.707107, -3.82385e-08, 1.45009e-07, 0.707107)
bones/38/rotation = Quaternion(-0.707107, -7.05285e-08, -7.05285e-08, 0.707107)
bones/39/rotation = Quaternion(-5.83589e-09, 6.43837e-10, 0.994809, 0.101756)
bones/40/rotation = Quaternion(-1.04035e-07, 0.391084, 0.920355, -2.95261e-08)
bones/45/position = Vector3(0.520841, 0.768323, -0.0576374)
bones/45/rotation = Quaternion(0.794627, -1.11759e-07, 0.607098, -5.96046e-08)
bones/47/position = Vector3(-0.510844, 0.768323, 0.0597369)
bones/47/rotation = Quaternion(-0.758253, -1.52737e-07, 0.651961, -1.11759e-08)

[node name="1H_Axe_Offhand" parent="Characters/Barbarian/Rig/Skeleton3D" index="0"]
transform = Transform3D(4.38513e-07, 0.262863, 0.964832, 0.999843, -0.017057, 0.00464699, 0.017679, 0.964682, -0.262822, 0.516153, 0.615214, 0.0120137)

[node name="Barbarian_Round_Shield" parent="Characters/Barbarian/Rig/Skeleton3D" index="1"]
transform = Transform3D(2.27023e-07, 0.262863, 0.964832, 0.999843, -0.0170595, 0.00464789, 0.0176816, 0.964682, -0.262822, 0.662273, 0.616216, -0.0446781)

[node name="1H_Axe" parent="Characters/Barbarian/Rig/Skeleton3D" index="2"]
transform = Transform3D(-0.00298413, -0.16272, 0.986667, 0.999922, -0.0123846, 0.000981492, 0.0120601, 0.986594, 0.162745, -0.496379, 0.619427, 0.13789)

[node name="2H_Axe" parent="Characters/Barbarian/Rig/Skeleton3D" index="3"]
transform = Transform3D(-0.00298413, -0.16272, 0.986667, 0.999922, -0.0123846, 0.000981492, 0.0120601, 0.986594, 0.162745, -0.496379, 0.619427, 0.13789)

[node name="Mug" parent="Characters/Barbarian/Rig/Skeleton3D" index="4"]
transform = Transform3D(-0.00298413, -0.16272, 0.986667, 0.999922, -0.0123846, 0.000981492, 0.0120601, 0.986594, 0.162745, -0.487517, 0.31949, 0.0859756)

[node name="Barbarian_Hat" parent="Characters/Barbarian/Rig/Skeleton3D" index="5"]
transform = Transform3D(0.99972, -1.40143e-09, 0.0236466, 1.39341e-09, 1, 3.55686e-10, -0.0236466, -3.22637e-10, 0.99972, -7.55726e-09, 1.19063, -1.39052e-07)

[node name="Barbarian_Cape" parent="Characters/Barbarian/Rig/Skeleton3D" index="6"]
transform = Transform3D(0.996275, -5.14962e-09, 0.0862353, 5.13043e-09, 1, 4.44077e-10, -0.0862353, 1.8939e-15, 0.996275, -1.91641e-06, 1.19063, 2.59003e-08)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.998572, 0.0477985, -0.0238551, -0.0170119, 0.707835, 0.706173, 0.0506395, -0.704759, 0.707637, 0.289022, 8.21207, 0)
shadow_enabled = true

[node name="Floor2" type="StaticBody3D" parent="."]

[node name="Floor" type="MeshInstance3D" parent="Floor2"]
transform = Transform3D(30, 0, 0, 0, 30, 0, 0, 0, 30, 0, 0, 0)
mesh = SubResource("PlaneMesh_o8vr5")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Floor2"]
transform = Transform3D(30, 0, 0, 0, -1.31134e-06, 30, 0, -30, -1.31134e-06, 0, 0, 0)
shape = SubResource("BoxShape3D_lknay")

[node name="Portal" parent="." instance=ExtResource("10_wksuf")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.21744, 0, 16.0452)

[node name="Hideout" parent="." instance=ExtResource("3_uheyo")]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)

[node name="Deaths" type="Label" parent="."]
offset_top = 40.0
offset_right = 237.0
offset_bottom = 101.0
theme_override_fonts/font = ExtResource("6_kd8a7")
theme_override_font_sizes/font_size = 50
text = "Deaths:"

[node name="Score" type="Label" parent="."]
offset_right = 526.0
offset_bottom = 61.0
theme_override_fonts/font = ExtResource("6_kd8a7")
theme_override_font_sizes/font_size = 50
text = "Max Score: 10/10"

[node name="Transition" parent="." instance=ExtResource("5_1qjme")]
position = Vector2(1, 0)

[node name="CharacterLabel" type="Label" parent="."]
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -20.0
offset_right = 20.0
offset_bottom = 23.0
grow_horizontal = 2

[connection signal="animation_finished" from="Characters/Rogue_Hooded/AnimationPlayer" to="Characters/Rogue_Hooded/SelectionArea" method="_on_animation_player_animation_finished" flags=18]

[editable path="Characters/Rogue_Hooded"]
[editable path="Characters/Barbarian"]
